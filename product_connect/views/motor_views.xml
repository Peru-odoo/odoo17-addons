<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree View -->
    <record id="view_motor_tree" model="ir.ui.view">
        <field name="name">motor.tree</field>
        <field name="model">motor</field>
        <field name="arch" type="xml">
            <tree string="Motors List">
                <field name="motor_number" string="Motor"/>
                <field name="manufacturer" string="Manu"/>
                <field name="horsepower"/>
                <field name="model"/>
                <field name="serial_number" string="Serial"/>
                <field name="year"/>
                <field name="color"/>
                <field name="cost" widget="float_factor"/>
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_motor_form" model="ir.ui.view">
        <field name="name">motor.form</field>
        <field name="model">motor</field>
        <field name="arch" type="xml">
            <form string="Motor Check-In" js_class="motor_form">
                <field name="stage" invisible="1"/>
                <sheet>
                    <notebook>
                        <page id="basic_info" string="Basic Info">
                            <group>
                                <field name="motor_number" readonly="1"/>
                                <field name="manufacturer" required="1" options="{'no_create': True, 'no_edit': True}"/>
                                <field name="horsepower"/>
                                <field name="motor_stroke" required="1" widget="selection_badge"/>
                                <field name="motor_configuration" required="1" widget="selection_badge"/>
                                <field name="model"/>
                                <field name="serial_number"/>
                                <field name="year" widget="selection_badge"/>
                                <field name="color" widget="selection_badge" required="1"/>
                                <field name="cost"/>
                                <field name="is_tag_readable" widget="selection_badge"/>
                            </group>
                        </page>
                        <page string="Images"
                              invisible="stage not in ['images', 'parts', 'basic_testing', 'extended_testing', 'finalization']">
                            <field name="images">
                                <tree editable="bottom" delete="False">
                                    <field name="name"/>
                                    <field name="image_data" widget="image_upload" options="{'size': [512, 0]}"/>
                                </tree>
                            </field>
                        </page>

                        <page string="Missing Parts"
                              invisible="stage not in ['parts', 'basic_testing', 'extended_testing', 'finalization']">
                            <field name="parts">
                                <tree editable="bottom" create="False" delete="False" open_form_view="0">
                                    <field name="missing" widget="boolean_toggle" class="large-toggle o_motor_part_missing_column"/>
                                    <field name="name" class="sc_full_width"/>
                                    <field name="template" invisible="1"/>
                                    <field name="hidden_tests" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Compression Testing" invisible="hide_compression_page or stage not in ['basic_testing', 'extended_testing', 'finalization']">
                            <field name="compression">
                                <tree editable="bottom" delete="False" create="False">
                                    <field name="cylinder_number" readonly="1"/>
                                    <field name="compression_psi" string="PSI"/>
                                    <field name="compression_image" string="Image" widget="binary"/>
                                </tree>
                            </field>
                            <field name="hide_compression_page" invisible="1"/>
                        </page>
                        <page id="basic_testing" string="Basic Testing" invisible="stage not in ['basic_testing', 'extended_testing', 'finalization']">
                            <field name="basic_tests" widget="motor_test_widget">
                                <tree>
                                    <field name="id"/>
                                    <field name="name"/>
                                    <field name="result_type"/>
                                    <field name="section"/>
                                    <field name="sequence"/>
                                    <field name="section_sequence"/>
                                    <field name="template"/>
                                    <field name="yes_no_result"/>
                                    <field name="selection_options" widget="many2many_tags"/>
                                    <field name="selection_result"/>
                                    <field name="numeric_result"/>
                                    <field name="text_result"/>
                                    <field name="file_result"/>
                                    <field name="default_value"/>
                                    <field name="conditions"/>
                                    <field name="conditional_tests"/>
                                </tree>
                            </field>
                        </page>
                        <page id="extended_testing" string="Extended Testing" invisible="stage not in ['extended_testing', 'finalization']">
                            <field name="extended_tests" widget="motor_test_widget">
                                <tree>
                                    <field name="id"/>
                                    <field name="name"/>
                                    <field name="result_type"/>
                                    <field name="section"/>
                                    <field name="sequence"/>
                                    <field name="section_sequence"/>
                                    <field name="template"/>
                                    <field name="yes_no_result"/>
                                    <field name="selection_options" widget="many2many_tags"/>
                                    <field name="selection_result"/>
                                    <field name="numeric_result"/>
                                    <field name="text_result"/>
                                    <field name="file_result"/>
                                    <field name="default_value"/>
                                    <field name="conditions"/>
                                    <field name="conditional_tests"/>
                                </tree>
                            </field>
                        </page>

                        <!-- Summary page-->
                        <page string="Summary" invisible="stage != 'finalization'">
                            <group string="Basic Info">
                                <field name="motor_number" readonly="1"/>
                                <field name="manufacturer" readonly="1"/>
                                <field name="horsepower" readonly="1"/>
                                <field name="motor_stroke" readonly="1"/>
                                <field name="motor_configuration" readonly="1"/>
                                <field name="model" readonly="1"/>
                                <field name="serial_number" readonly="1"/>
                                <field name="year" readonly="1"/>
                                <field name="color" readonly="1"/>
                                <field name="cost" readonly="1"/>
                                <field name="is_tag_readable" readonly="1"/>
                            </group>
                            <group string="Images">
                                <field name="images" string="" mode="tree" readonly="1">
                                    <tree>
                                        <field name="name"/>
                                        <field name="image_data" widget="image" options="{'size': [128, 128]}"/>
                                    </tree>
                                </field>
                            </group>

                            <group string="Missing Parts">
                                <field name="parts" mode="tree" readonly="1">
                                    <tree>
                                        <field name="missing"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </group>

                            <group string="Compression Testing">
                                <field name="compression" mode="tree" readonly="1">
                                    <tree>
                                        <field name="cylinder_number"/>
                                        <field name="compression_psi"/>
                                    </tree>
                                </field>
                            </group>

                            <group string="Basic Testing">
                                <field name="basic_tests" mode="tree" readonly="1">
                                    <tree>
                                        <field name="name"/>
                                        <field name="result_type"/>
                                        <field name="yes_no_result"/>
                                        <field name="selection_result"/>
                                        <field name="numeric_result"/>
                                        <field name="text_result"/>
                                        <field name="file_result" widget="binary"/>
                                    </tree>
                                </field>
                            </group>

                            <group string="Extended Testing">
                                <field name="extended_tests" mode="tree" readonly="1">
                                    <tree>
                                        <field name="name"/>
                                        <field name="result_type"/>
                                        <field name="yes_no_result"/>
                                        <field name="selection_result"/>
                                        <field name="numeric_result"/>
                                        <field name="text_result"/>
                                        <field name="file_result" widget="binary"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                        <page string="Finalization" invisible="stage != 'finalization'">
                            <!-- Add fields relevant for the finalization stage here -->
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action -->
    <record model="ir.actions.act_window" id="action_motor_form">
        <field name="name">Motors</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">motor</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="server_action_motor_print_labels" model="ir.actions.server">
        <field name="name">Print Motor Labels</field>
        <field name="model_id" ref="model_motor"/>
        <field name="binding_model_id" ref="model_motor"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
            action = records.print_motor_labels()
        </field>
    </record>

    <!-- Menu -->
    <menuitem id="menu_subheader_motor" name="Motors" parent="stock.menu_stock_inventory_control"/>
    <menuitem id="menu_subheader_config_motor" name="Motors" parent="stock.menu_stock_config_settings"/>
    <menuitem id="menu_product_motor" name="Motor Check-in" parent="menu_subheader_motor" action="action_motor_form" sequence="10"/>

</odoo>